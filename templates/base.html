<!doctype html>
<html lang="ja">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>{% block title %}My Flask Blog{% endblock %}</title>
        <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>
    </head>
    <body class="bg-gray-100 text-gray-800">
        <div class="container mx-auto px-4">
            <header class="py-6 mb-8 border-b">
                <h1 class="text-3xl font-bold text-blue-600 hover:text-blue-800">
                    <a href="{{ url_for('index')}}"> My Flask Blog
                    </a>
                </h1>
                <nav class="mt-2">
                    <ul class="flex space-x-4">
                        <li><a href="{{ url_for('index') }}" class="text-blue-600 hover:text-blue-800">トップ</a>
                            {% if current_user.is_authenticated %}
                            {# ログイン済みの場合 #}
                            <li><span class="text-gray-600">{{ current_user.username }} さん</span></li>
                            <li><a href="{{ url_for('admin_index') }}"  class="text-blue-600 hover:text-blue-800">記事管理</a></li>
                            <li><a href="{{ url_for('logout') }}"  class="text-blue-600 hover:text-blue-800">ログアウト</a></li>
                            {# ここに後で記事管理ページへのリンクなどを追加 #}
                            {% else %}
                            {# 未ログインの場合 #}
                            <li><a href="{{ url_for('login') }}" class="text-blue-600 hover:text-blue-800">ログイン</a></li>
                            {% endif %}
                        </li>
                    </ul>
                </nav>
            </header>

            {# (login.html からこちらに移動しても良い) #}
            {% with messages = get_flashed_messages(with_categories=true) %}
            {% if messages %}
            <div class="my-4">
                {% for category, message in messages %}
                {% set alert_class = 'bg-blue-100 text-blue-700' %} {# default category or no category #}
                {% if category == 'error' %}
                {% set alert_class = 'bg-red-100 text-red-700' %}
                {% elif category == 'success' %}
                {% set alert_class = 'bg-green-100 text-green-700' %}
                {% endif %}
                <div class="p-4 rounded {{ alert_class }}" role="alert">
                    {{ message }}
                </div>
                {% endfor %}
            </div>
            {% endif %}
            {% endwith %}

            <main class="bg-white p-6 rounded-lg shadow-md">
                {% block content %}
                {% endblock %}
            </main>

            <footer class="mt-8 pt-6 border-t text-center text-gray-500 text-sm">
                <p>&copy; 2025 Your Name</p>
            </footer>
        </body>
    </body>
</html>